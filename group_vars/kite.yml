---
hostname: kite

package_list:
  - name: curl
  - name: git
  - name: htop
  - name: sudo
  - name: wget

## COMPOSE-GEN
docker_user: "{{ vault.user }}"
docker_dir: "/home/{{ vault.user }}/docker"
compose_containers:
  ### HCI
  hci-website:
    version: "3.3"
    services:
      bnuuy:
        container_name: bnuuy
        ports:
          - "8020:8000"
        image: crccheck/hello-world
        volumes:
          - ./web:/www
        restart: unless-stopped
  ### SHIORI
  shiori:
    version: "3.3"
    services:
      shiori:
        image: radhifadlillah/shiori
        container_name: shiori
        ports:
          - "8070:8080"
        volumes:
          - "./config:/srv/shiori"
        restart: unless-stopped
  ### CHANGE DETECTION
  changedetection:
    version: "3"
    services:
      changedetection:
        image: ghcr.io/dgtlmoon/changedetection.io
        container_name: changedetection
        environment:
          - BASE_URL=https://change.bnuuy.net
        volumes:
          - ./data:/datastore
        ports:
          - 5003:5000
        restart: unless-stopped
  ### UPTIME KUMA
  uptime_kuma:
    version: "3.3"
    services:
      uptime-kuma:
        image: louislam/uptime-kuma:1
        container_name: uptime-kuma
        volumes:
          - ./data:/app/data
        ports:
          - 3001:3001
        restart: unless-stopped
  ### MKDOCS
  mkdocs:
    version: "3.3"
    services:
      mkdocs:
        container_name: mkdocs
        ports:
          - 8000:8000
        volumes:
          - .:/docs
        image: squidfunk/mkdocs-material
        restart: unless-stopped
  audiobookshelf:
    version: "3.7"
    services:
      audiobookshelf:
        image: ghcr.io/advplyr/audiobookshelf
        ports:
          - 13378:80
        volumes:
          - ./audiobooks:/audiobooks
          - ./podcasts:/podcasts
          - ./metadata:/metadata
          - ./config:/config
        restart: unless-stopped
  freshrss:
    version: "2.4"
    services:
      freshrss:
        image: freshrss/freshrss:edge
        container_name: freshrss
        restart: unless-stopped
        logging:
          options:
            max-size: 10m
        volumes:
          # Recommended volume for FreshRSS persistent data such as configuration and SQLite databases
          - ./data:/var/www/FreshRSS/data
          # Optional volume for storing third-party extensions
          - ./extensions:/var/www/FreshRSS/extensions
          # Optional file providing custom global settings (used before a FreshRSS install)
          # - ./config.custom.php:/var/www/FreshRSS/data/config.custom.php
          # Optional file providing custom user settings (used before a new user is created)
          # - ./config-user.custom.php:/var/www/FreshRSS/data/config-user.custom.php
        ports:
          - "8036:80"
        environment:
          TZ: Europe/Amsterdam
          CRON_MIN: "*/20"
          FRESHRSS_ENV: development
          FRESHRSS_USER: |-
            --api_password ${ADMIN_API_PASSWORD}
            --email ${ADMIN_EMAIL}
            --language en
            --password ${ADMIN_PASSWORD}
            --user admin
  openbooks:
    version: "3.3"
    services:
      openbooks:
        ports:
          - "8033:80"
        volumes:
          - "./books:/books"
        restart: unless-stopped
        container_name: openbooks
        command: --name uwumiii --persist
        image: evanbuss/openbooks:latest
